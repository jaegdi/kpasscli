<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# kpasscli

```go
import "kpasscli"
```

## Index

- [func Init\(\) \*cmd.Flags](<#Init>)
- [func RunApp\(flags \*cmd.Flags, loadConfig func\(string\) \(\*config.Config, error\), resolveDBPath func\(string, \*config.Config\) string, resolvePassword func\(string, \*config.Config, string, ...keepass.PasswordPromptFunc\) \(string, error\), openDatabase func\(string, string\) \(\*gokeepasslib.Database, error\), newFinder func\(\*gokeepasslib.Database\) search.FinderInterface, newHandler func\(output.OutputType\) output.Handler, getEnv func\(string\) string\) error](<#RunApp>)


<a name="Init"></a>
## func [Init](<https://github.com/jaegdi/kpasscli/blob/master/init.go#L19>)

```go
func Init() *cmd.Flags
```



<a name="RunApp"></a>
## func [RunApp](<https://github.com/jaegdi/kpasscli/blob/master/main.go#L18-L27>)

```go
func RunApp(flags *cmd.Flags, loadConfig func(string) (*config.Config, error), resolveDBPath func(string, *config.Config) string, resolvePassword func(string, *config.Config, string, ...keepass.PasswordPromptFunc) (string, error), openDatabase func(string, string) (*gokeepasslib.Database, error), newFinder func(*gokeepasslib.Database) search.FinderInterface, newHandler func(output.OutputType) output.Handler, getEnv func(string) string) error
```

RunApp contains the main application logic and is testable.

# cmd

```go
import "kpasscli/src/cmd"
```

## Index

- [func StartClipboardClearer\(delaySeconds int\)](<#StartClipboardClearer>)
- [type Flags](<#Flags>)
  - [func ParseFlags\(fs \*flag.FlagSet, args \[\]string\) \*Flags](<#ParseFlags>)
  - [func ParseFlagsDefault\(\) \*Flags](<#ParseFlagsDefault>)


<a name="StartClipboardClearer"></a>
## func [StartClipboardClearer](<https://github.com/jaegdi/kpasscli/blob/master/src/cmd/clipboard.go#L203>)

```go
func StartClipboardClearer(delaySeconds int)
```

StartClipboardClearer startet einen \*neuen\*, vom Hauptprozess losgelösten \(detached\) Prozess, der nach einer bestimmten Verzögerung die Zwischenablage löscht. Der neue Prozess ist eine Instanz der aktuell laufenden kpasscli\-Executable, die mit speziellen internen Flags aufgerufen wird. Parameter:

- delaySeconds: Die Anzahl der Sekunden, die der neue Prozess warten soll, bevor er die Zwischenablage löscht.

<a name="Flags"></a>
## type [Flags](<https://github.com/jaegdi/kpasscli/blob/master/src/cmd/cli-params.go#L26-L43>)



```go
type Flags struct {
    KdbPath       string
    KdbPassword   string
    Item          string
    FieldName     string
    Out           string
    ConfigPath    string
    ClearAfter    int
    CaseSensitive bool
    ExactMatch    bool
    ShowMan       bool
    ShowHelp      bool
    DebugFlag     bool
    VerifyFlag    bool
    CreateConfig  bool
    PrintConfig   bool
    ShowAll       bool
}
```

<a name="ParseFlags"></a>
### func [ParseFlags](<https://github.com/jaegdi/kpasscli/blob/master/src/cmd/cli-params.go#L55>)

```go
func ParseFlags(fs *flag.FlagSet, args []string) *Flags
```

ParseFlags parses command\-line flags from the provided FlagSet and arguments.

Parameters:

- fs: The FlagSet to define and parse flags on.
- args: The arguments to parse \(typically os.Args\[1:\]\).

Returns:

- \*Flags: The parsed Flags struct with all options set.

For production, use ParseFlagsDefault\(\).

<a name="ParseFlagsDefault"></a>
### func [ParseFlagsDefault](<https://github.com/jaegdi/kpasscli/blob/master/src/cmd/cli-params.go#L111>)

```go
func ParseFlagsDefault() *Flags
```

ParseFlagsDefault parses flags from the global flag.CommandLine and os.Args\[1:\].

This is the default function to use in production. It sets up the flags, sets the usage function to show help documentation, and returns the parsed Flags struct. Typically called in main\(\).

Returns:

- \*Flags: The parsed Flags struct with all options set.

# config

```go
import "kpasscli/src/config"
```

## Index

- [func CreateExampleConfig\(configPath string\) error](<#CreateExampleConfig>)
- [type Config](<#Config>)
  - [func Load\(configPath string\) \(\*Config, error\)](<#Load>)
  - [func \(c \*Config\) Print\(\)](<#Config.Print>)


<a name="CreateExampleConfig"></a>
## func [CreateExampleConfig](<https://github.com/jaegdi/kpasscli/blob/master/src/config/config.go#L64>)

```go
func CreateExampleConfig(configPath string) error
```

CreateExampleConfig creates an example configuration file at the specified path.

Parameters:

- configPath: The path where the example config file should be created.

Returns:

- error: Any error encountered during the creation of the config file.

<a name="Config"></a>
## type [Config](<https://github.com/jaegdi/kpasscli/blob/master/src/config/config.go#L14-L23>)

Config represents the application configuration.

```go
type Config struct {
    // DatabasePath is the default path to the KeePass database file
    DatabasePath string `yaml:"database_path"`
    // DefaultOutput specifies the default output type (stdout/clipboard)
    DefaultOutput      string `yaml:"default_output"`
    PasswordFile       string `yaml:"password_file"`
    PasswordExecutable string `yaml:"password_executable"`
    ConfigfilePath     string `yaml:"configfile_path"`
    OutputFormat       string `yaml:"output_format"`
}
```

<a name="Load"></a>
### func [Load](<https://github.com/jaegdi/kpasscli/blob/master/src/config/config.go#L33>)

```go
func Load(configPath string) (*Config, error)
```

Load reads and parses the configuration file from the given path.

Parameters:

- configPath: The path to the configuration file to load.

Returns:

- \*Config: The loaded configuration struct.
- error: Any error encountered during loading or parsing.

<a name="Config.Print"></a>
### func \(\*Config\) [Print](<https://github.com/jaegdi/kpasscli/blob/master/src/config/config.go#L78>)

```go
func (c *Config) Print()
```



# debug

```go
import "kpasscli/src/debug"
```

## Index

- [func Enable\(\)](<#Enable>)
- [func Enabled\(\) bool](<#Enabled>)
- [func ErrMsg\(err error, msg string\)](<#ErrMsg>)
- [func Log\(format string, v ...interface\{\}\)](<#Log>)


<a name="Enable"></a>
## func [Enable](<https://github.com/jaegdi/kpasscli/blob/master/src/debug/debug.go#L26>)

```go
func Enable()
```

Enable sets the debug logging flag to true.

This function enables debug logging globally for the application.

<a name="Enabled"></a>
## func [Enabled](<https://github.com/jaegdi/kpasscli/blob/master/src/debug/debug.go#L19>)

```go
func Enabled() bool
```

Enabled returns true if debug logging is enabled.

Returns:

- bool: True if debug logging is enabled, false otherwise.

<a name="ErrMsg"></a>
## func [ErrMsg](<https://github.com/jaegdi/kpasscli/blob/master/src/debug/debug.go#L37>)

```go
func ErrMsg(err error, msg string)
```

ErrMsg prints an error message and exits the program if err is not nil.

Parameters:

- err: The error to check.
- msg: The message to print if err is not nil.

If err is not nil, this function prints the error and terminates the program with exit code 1.

<a name="Log"></a>
## func [Log](<https://github.com/jaegdi/kpasscli/blob/master/src/debug/debug.go#L51>)

```go
func Log(format string, v ...interface{})
```

Log logs a debug message if debug logging is enabled.

It includes the name of the calling function and the line number in the log message.

Parameters:

- format: The format string for the log message, similar to fmt.Printf.
- v: The values to be formatted according to the format string.

# doc

```go
import "kpasscli/src/doc"
```

## Index

- [func ShowHelp\(\)](<#ShowHelp>)
- [func ShowMan\(\)](<#ShowMan>)


<a name="ShowHelp"></a>
## func [ShowHelp](<https://github.com/jaegdi/kpasscli/blob/master/src/doc/help.go#L7>)

```go
func ShowHelp()
```



<a name="ShowMan"></a>
## func [ShowMan](<https://github.com/jaegdi/kpasscli/blob/master/src/doc/man.go#L166>)

```go
func ShowMan()
```



# keepass

```go
import "kpasscli/src/keepass"
```

## Index

- [func GetAllFields\(db \*gokeepasslib.Database, config \*config.Config, itemPath string\) error](<#GetAllFields>)
- [func OpenDatabase\(path string, password string\) \(\*gokeepasslib.Database, error\)](<#OpenDatabase>)
- [func ResolveDatabasePath\(flagPath string, cfg \*config.Config\) string](<#ResolveDatabasePath>)
- [func ResolvePassword\(passParam string, cfg \*config.Config, kdbpassenv string, promptFunc ...PasswordPromptFunc\) \(string, error\)](<#ResolvePassword>)
- [type PasswordPromptFunc](<#PasswordPromptFunc>)


<a name="GetAllFields"></a>
## func [GetAllFields](<https://github.com/jaegdi/kpasscli/blob/master/src/keepass/keepass.go#L203>)

```go
func GetAllFields(db *gokeepasslib.Database, config *config.Config, itemPath string) error
```

GetAllFields finds a specific entry by path and displays all its fields.

Parameters:

- db: The KeePass database to search.
- config: The configuration object for output formatting.
- itemPath: The path of the entry to display.

Returns:

- error: Any error encountered during the operation.

<a name="OpenDatabase"></a>
## func [OpenDatabase](<https://github.com/jaegdi/kpasscli/blob/master/src/keepass/keepass.go#L29>)

```go
func OpenDatabase(path string, password string) (*gokeepasslib.Database, error)
```

OpenDatabase opens and decodes a KeePass database file. Parameters:

```
path: Path to the KeePass database file
password: Password to decrypt the database
```

Returns:

```
*gokeepasslib.Database: Decoded database object
error: Any error encountered during opening or decoding
```

<a name="ResolveDatabasePath"></a>
## func [ResolveDatabasePath](<https://github.com/jaegdi/kpasscli/blob/master/src/keepass/keepass.go#L181>)

```go
func ResolveDatabasePath(flagPath string, cfg *config.Config) string
```

ResolveDatabasePath returns the KeePass database path based on flag, environment, or config.

Parameters:

- flagPath: The path provided via command\-line flag.
- cfg: The configuration object containing a default database path.

Returns:

- string: The resolved database path, or empty string if not found.

<a name="ResolvePassword"></a>
## func [ResolvePassword](<https://github.com/jaegdi/kpasscli/blob/master/src/keepass/keepass.go#L75>)

```go
func ResolvePassword(passParam string, cfg *config.Config, kdbpassenv string, promptFunc ...PasswordPromptFunc) (string, error)
```

ResolvePassword retrieves the database password from a file, executable, or prompt. The promptFunc parameter is optional; if nil, getPasswordFromPrompt is used. ResolvePassword retrieves the database password from a file or executable. It first checks if the password parameter is provided. If not, it falls back to the configuration. If the configuration specifies an executable, it runs the executable to get the password. If the password parameter is a named pipe, it reads the password from the pipe. If the password parameter is a regular file, it reads the password from the file. If the password parameter is an executable, it runs the executable to get the password. Parameters:

- passParam: The password parameter provided via command\-line flag.
- cfg: The configuration object containing default paths and executables.
- kdbpassenv: The environment variable for the password, if set.
- promptFunc: Optional function to prompt for password if no file/executable is provided.

Returns:

- string: The resolved password.
- error: Any error encountered during resolution.

<a name="PasswordPromptFunc"></a>
## type [PasswordPromptFunc](<https://github.com/jaegdi/kpasscli/blob/master/src/keepass/keepass.go#L56>)

PasswordPromptFunc defines a function type for prompting the user for a password.

```go
type PasswordPromptFunc func() (string, error)
```

# output

```go
import "kpasscli/src/output"
```

## Index

- [func IsValidType\(outputType string\) bool](<#IsValidType>)
- [func ShowAllFields\(entry \*gokeepasslib.Entry, config config.Config\)](<#ShowAllFields>)
- [type Handler](<#Handler>)
  - [func NewHandler\(outputType OutputType\) Handler](<#NewHandler>)
- [type OutputChannel](<#OutputChannel>)
- [type OutputType](<#OutputType>)
  - [func ResolveOutputType\(flagOut string, cfg \*config.Config\) OutputType](<#ResolveOutputType>)


<a name="IsValidType"></a>
## func [IsValidType](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L108>)

```go
func IsValidType(outputType string) bool
```

IsValidType checks if the provided output type is valid.

Parameters:

- outputType: The output type to check \(string\).

Returns:

- bool: True if the output type is valid, false otherwise.

<a name="ShowAllFields"></a>
## func [ShowAllFields](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L125>)

```go
func ShowAllFields(entry *gokeepasslib.Entry, config config.Config)
```

ShowAllFields displays all fields of a KeePass entry in a human\-readable format. Parameters:

- entry: The KeePass entry to display.
- config: The configuration object containing output format settings.

Returns:

- error: Any error encountered during the operation.

<a name="Handler"></a>
## type [Handler](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L28-L30>)

Handler is an interface for outputting values.

```go
type Handler interface {
    Output(string) error
}
```

<a name="NewHandler"></a>
### func [NewHandler](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L52>)

```go
func NewHandler(outputType OutputType) Handler
```

NewHandler creates a new Handler instance with the specified output type.

Parameters:

- outputType: The OutputType specifying how output should be handled \(clipboard or stdout\).

Returns:

- Handler: A new Handler instance for the specified output type.

<a name="OutputChannel"></a>
## type [OutputChannel](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L18>)



```go
type OutputChannel string
```

<a name="Clipboard"></a>

```go
const (
    Clipboard OutputChannel = "clipboard"
    Stdout    OutputChannel = "stdout"
)
```

<a name="OutputType"></a>
## type [OutputType](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L33>)

OutputType defines the type of output \(clipboard or stdout\)

```go
type OutputType string
```

<a name="ClipboardType"></a>

```go
const (
    ClipboardType OutputType = "clipboard"
    StdoutType    OutputType = "stdout"
)
```

<a name="ResolveOutputType"></a>
### func [ResolveOutputType](<https://github.com/jaegdi/kpasscli/blob/master/src/output/handler.go#L281>)

```go
func ResolveOutputType(flagOut string, cfg *config.Config) OutputType
```

ResolveOutputType determines the output type based on the provided flag, environment variable, or configuration.

Order of precedence:

1. If the flagOut parameter is not empty, it returns the corresponding output type.
2. If the environment variable "KPASSCLI\_OUT" is set and valid, it returns the corresponding output type.
3. If the cfg parameter is not nil and cfg.DefaultOutput is not empty, it returns the corresponding output type.
4. If none of the above conditions are met, it defaults to output.StdoutType.

Parameters:

- flagOut: A string representing the output type specified by a flag.
- cfg: A pointer to a config.Config struct that may contain a default output type.

Returns:

- OutputType: The resolved output type based on the provided inputs.

# search

```go
import "kpasscli/src/search"
```

## Index

- [func EnableVerify\(\)](<#EnableVerify>)
- [type Finder](<#Finder>)
  - [func NewFinder\(db \*gokeepasslib.Database\) \*Finder](<#NewFinder>)
  - [func \(f \*Finder\) Find\(query string\) \(\[\]Result, error\)](<#Finder.Find>)
- [type FinderInterface](<#FinderInterface>)
- [type Result](<#Result>)
  - [func \(r \*Result\) GetField\(fieldName string\) \(string, error\)](<#Result.GetField>)
- [type SearchOptions](<#SearchOptions>)
  - [func DefaultSearchOptions\(\) SearchOptions](<#DefaultSearchOptions>)


<a name="EnableVerify"></a>
## func [EnableVerify](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L54>)

```go
func EnableVerify()
```

EnableVerify enables verification logging for search operations.

This function sets the internal verify flag to true, enabling additional debug or verification output during search operations. Useful for debugging or testing.

<a name="Finder"></a>
## type [Finder](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L65-L68>)

Finder handles searching through the KeePass database

```go
type Finder struct {
    Options SearchOptions // Add Options field to Finder struct
    // contains filtered or unexported fields
}
```

<a name="NewFinder"></a>
### func [NewFinder](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L77>)

```go
func NewFinder(db *gokeepasslib.Database) *Finder
```

NewFinder creates a new Finder instance with default search options.

Parameters:

- db: The KeePass database to search.

Returns:

- \*Finder: A new Finder instance ready for searching.

<a name="Finder.Find"></a>
### func \(\*Finder\) [Find](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L103>)

```go
func (f *Finder) Find(query string) ([]Result, error)
```

Find searches for entries in the KeePass database based on the provided query string.

Parameters:

- query: Search query, can be absolute path, relative path, or entry name.

Returns:

- \[\]Result: Array of matching entries with their paths.
- error: Any error encountered during search.

<a name="FinderInterface"></a>
## type [FinderInterface](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L18-L21>)

FinderInterface abstracts the Find method for testability FinderInterface defines the interface for searching entries in a KeePass database. It provides a method to find entries based on a query string. This interface allows for different implementations of search logic, making it easier to test and extend functionality

```go
type FinderInterface interface {
    Find(query string) ([]Result, error)
}
```

<a name="Result"></a>
## type [Result](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L25-L28>)

Result represents the outcome of a search operation. It contains the path to the found entry and a pointer to the entry itself.

```go
type Result struct {
    Path  string
    Entry *gokeepasslib.Entry
}
```

<a name="Result.GetField"></a>
### func \(\*Result\) [GetField](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L39>)

```go
func (r *Result) GetField(fieldName string) (string, error)
```

GetField returns the value of the specified field from the entry GetField retrieves the value of a specified field from the entry. It searches through the entry's values and returns the content of the field if found. If the field is not found, it returns an error indicating that the field was not found. Parameters:

- fieldName: The name of the field to retrieve.

Returns:

- The content of the field if found.

<a name="SearchOptions"></a>
## type [SearchOptions](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L59-L62>)

SearchOptions defines the search behavior

```go
type SearchOptions struct {
    CaseSensitive bool
    ExactMatch    bool
}
```

<a name="DefaultSearchOptions"></a>
### func [DefaultSearchOptions](<https://github.com/jaegdi/kpasscli/blob/master/src/search/finder.go#L88>)

```go
func DefaultSearchOptions() SearchOptions
```

DefaultSearchOptions returns the default search options for Finder.

Returns:

- SearchOptions: The default search options \(case\-insensitive, partial match\).

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
